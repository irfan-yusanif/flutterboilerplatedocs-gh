"use strict";(self.webpackChunkdyte_docs=self.webpackChunkdyte_docs||[]).push([["11769"],{54482:function(e,t,r){r.r(t),r.d(t,{dyte_livestream_toggle:function(){return o}});var i=r(84982),s=r(48724),a=r(83041),n=r(78410),l=r(39415);r(51943);let o=class{constructor(e){(0,i.r)(this,e),this.stateUpdate=(0,i.c)(this,"dyteStateUpdate",7),this.dyteAPIError=(0,i.c)(this,"dyteAPIError",7),this.livestreamStateListener=e=>{this.livestreamState=e,("LIVESTREAMING"===e||"IDLE"===e)&&(this.stateUpdate.emit({activeMoreMenu:!1}),l.s.activeMoreMenu=!1)},this.isLoading=()=>null==this.meeting||"STARTING"===this.livestreamState||"STOPPING"===this.livestreamState,this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=s.d,this.t=(0,a.u)(),this.livestreamState="IDLE"}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.clearListeners()}meetingChanged(e){var t,r;null!=e&&(this.livestreamState=null===(t=this.meeting.livestream)||void 0===t?void 0:t.state,null===(r=this.meeting.livestream)||void 0===r||r.on("livestreamUpdate",this.livestreamStateListener))}async toggleLivestream(){var e,t;if("LIVESTREAMING"===this.livestreamState)try{await (null===(e=this.meeting.livestream)||void 0===e?void 0:e.stop())}catch(e){this.dyteAPIError.emit({trace:this.t("livestream.stop"),message:this.t("livestream.error.stop")})}else try{await (null===(t=this.meeting.livestream)||void 0===t?void 0:t.start())}catch(e){this.dyteAPIError.emit({trace:this.t("livestream.start"),message:this.t("livestream.error.start")})}}clearListeners(){var e;null===(e=this.meeting.livestream)||void 0===e||e.removeListener("livestreamUpdate",this.livestreamStateListener)}getLivestreamLabel(){switch(this.livestreamState){case"IDLE":return this.t("livestream.go_live");case"LIVESTREAMING":return this.t("livestream.end_live");case"STARTING":return this.t("livestream.starting");case"STOPPING":return this.t("livestream.stopping");default:return this.t("livestream.error")}}getLivestreamIcon(){if("IDLE"===this.livestreamState)return this.iconPack.start_livestream;return this.iconPack.stop_livestream}render(){if((0,n.i)(this.meeting))return(0,i.h)(i.H,null,(0,i.h)("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,isLoading:this.isLoading(),class:{"active-livestream":"LIVESTREAMING"===this.livestreamState},onClick:()=>this.toggleLivestream(),icon:this.getLivestreamIcon(),disabled:this.isLoading(),label:this.t(this.getLivestreamLabel()),variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"]}}};o.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}"},78410:function(e,t,r){var i,s,a,n;r.d(t,{P:function(){return i},a:function(){return l},b:function(){return s},c:function(){return E},d:function(){return c},i:function(){return o},s:function(){return u}});let l=e=>!!u(e)&&"LIVESTREAM"===e.meta.viewType&&"ON_STAGE"!==e.stage.status,o=e=>{var t;return!!u(e)&&"LIVESTREAM"===e.meta.viewType&&(null===(t=null==e?void 0:e.self)||void 0===t?void 0:t.permissions.canLivestream)},u=e=>{var t;return(null===(t=null==e?void 0:e.self)||void 0===t?void 0:t.permissions.isV2)&&(null==e?void 0:e.livestream)};(a=i||(i={})).BUFFERING="Buffering",a.ENDED="Ended",a.IDLE="Idle",a.PLAYING="Playing",a.READY="Ready",(n=s||(s={})).INITIALIZED="PlayerInitialized",n.QUALITY_CHANGED="PlayerQualityChanged",n.DURATION_CHANGED="PlayerDurationChanged",n.VOLUME_CHANGED="PlayerVolumeChanged",n.MUTED_CHANGED="PlayerMutedChanged",n.PLAYBACK_RATE_CHANGED="PlayerPlaybackRateChanged",n.REBUFFERING="PlayerRebuffering",n.AUDIO_BLOCKED="PlayerAudioBlocked",n.PLAYBACK_BLOCKED="PlayerPlaybackBlocked",n.ERROR="PlayerError",n.RECOVERABLE_ERROR="PlayerRecoverableError",n.ANALYTICS_EVENT="PlayerAnalyticsEvent",n.TIME_UPDATE="PlayerTimeUpdate",n.BUFFER_UPDATE="PlayerBufferUpdate",n.SEEK_COMPLETED="PlayerSeekCompleted",n.SESSION_DATA="PlayerSessionData",n.STATE_CHANGED="PlayerStateChanged",n.WORKER_ERROR="PlayerWorkerError",n.METADATA="PlayerMetadata",n.TEXT_CUE="PlayerTextCue",n.TEXT_METADATA_CUE="PlayerTextMetadataCue",n.AD_CUE="PlayerAdCue",n.STREAM_SOURCE_CUE="PlayerStreamSourceCue",n.NETWORK_UNAVAILABLE="PlayerNetworkUnavailable",n.SEGMENT_DISCONTINUITY="PlayerSegmentDiscontinuity",n.SEGMENT_METADATA="PlayerSegmentMetadata",n.PLAYER_METADATA="PlayerMetadata";let E=[s.TIME_UPDATE,s.BUFFER_UPDATE,s.TEXT_METADATA_CUE,s.PLAYER_METADATA],c=[s.REBUFFERING,s.AUDIO_BLOCKED,s.PLAYBACK_BLOCKED,s.ERROR,s.RECOVERABLE_ERROR,s.WORKER_ERROR,s.NETWORK_UNAVAILABLE,s.ANALYTICS_EVENT,s.PLAYBACK_RATE_CHANGED,s.QUALITY_CHANGED,s.INITIALIZED]},39415:function(e,t,r){let i;r.d(t,{o:function(){return m},s:function(){return v}});var s,a=r(84982),n=r(51943);let l=(e,t,r)=>{let i=e.get(t);i?!i.includes(r)&&i.push(r):e.set(t,[r])},o=e=>!("isConnected"in e)||e.isConnected;let u=(s=e=>{for(let t of e.keys())e.set(t,e.get(t).filter(o))},(...e)=>{i&&clearTimeout(i),i=setTimeout(()=>{i=0,s(...e)},2e3)}),E=()=>{if("function"!=typeof a.g)return{};let e=new Map;return{dispose:()=>e.clear(),get:t=>{let r=(0,a.g)();r&&l(e,t,r)},set:t=>{let r=e.get(t);r&&e.set(t,r.filter(a.f)),u(e)},reset:()=>{e.forEach(e=>e.forEach(a.f)),u(e)}}},c=e=>"function"==typeof e?e():e,d=(e,t=(e,t)=>e!==t)=>{let r=c(e),i=new Map(Object.entries(null!=r?r:{})),s={dispose:[],get:[],set:[],reset:[]},a=()=>{var t;i=new Map(Object.entries(null!==(t=c(e))&&void 0!==t?t:{})),s.reset.forEach(e=>e())},n=e=>(s.get.forEach(t=>t(e)),i.get(e)),l=(e,r)=>{let a=i.get(e);t(r,a,e)&&(i.set(e,r),s.set.forEach(t=>t(e,r,a)))},o="undefined"==typeof Proxy?{}:new Proxy(r,{get:(e,t)=>n(t),ownKeys:e=>Array.from(i.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>i.has(t),set:(e,t,r)=>(l(t,r),!0)}),u=(e,t)=>(s[e].push(t),()=>{h(s[e],t)});return{state:o,get:n,set:l,on:u,onChange:(t,r)=>{let i=u("set",(e,i)=>{e===t&&r(i)}),s=u("reset",()=>r(c(e)[t]));return()=>{i(),s()}},use:(...e)=>{let t=e.reduce((e,t)=>(t.set&&e.push(u("set",t.set)),t.get&&e.push(u("get",t.get)),t.reset&&e.push(u("reset",t.reset)),t.dispose&&e.push(u("dispose",t.dispose)),e),[]);return()=>t.forEach(e=>e())},dispose:()=>{s.dispose.forEach(e=>e()),a()},reset:a,forceUpdate:e=>{let t=i.get(e);s.set.forEach(r=>r(e,t,t))}}},h=(e,t)=>{let r=e.indexOf(t);r>=0&&(e[r]=e[e.length-1],e.length--)},{state:v,onChange:m}=((e,t)=>{let r=d(e,void 0);return r.use(E()),r})({prefs:(0,n.g)()})},51943:function(e,t,r){let i;r.d(t,{a:function(){return a},b:function(){return o},c:function(){return E},g:function(){return u},s:function(){return l}});let s={get:(e,t,r)=>(...i)=>{try{return Reflect.get(e,t,r).apply(e,i)}catch(e){return null}}};try{i=new Proxy(localStorage,s)}catch(e){i=new Proxy({},s)}let a=i,n="dyte-prefs",l=(e,t)=>{let r=JSON.parse(a.getItem(n)||"{}");r[e]=JSON.stringify(t),a.setItem("dyte-prefs",JSON.stringify(r))},o=e=>JSON.parse(a.getItem(n)||"{}")[e],u=()=>{let e=JSON.parse(a.getItem(n)||"{}"),t=!e["mirror-video"]||"true"===e["mirror-video"];return{mirrorVideo:t,muteNotificationSounds:!!e["mute-notification-sounds"]&&"true"===e["mute-notification-sounds"]}},E={}}}]);